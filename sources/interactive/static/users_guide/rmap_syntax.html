

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>About Mappings &mdash; CRDS Users Manual 1.0a documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="CRDS Users Manual 1.0a documentation" href="index.html" />
    <link rel="prev" title="Using the CRDS Web Site" href="web_site_use.html" />
<link rel="stylesheet" href="_static/style.css"  type="text/css">

  </head>
  <body>
<div id="header" class="related">
  <a href="/"><img ALT="Hubble Space Telescope" SRC="_static/HSTBlackTitle.jpg" style="border-style: none"></a>
    <h2>Calibration and Reference Data System (CRDS)</h2>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="about-mappings">
<h1>About Mappings<a class="headerlink" href="#about-mappings" title="Permalink to this headline">¶</a></h1>
<p>CRDS mappings are organized in a 3 tier hierarchy:  pipeline (.pmap),
instrument (.imap), and reference (.rmap).   Based on dataset parameters,
the pipeline context is used to select an instrument mapping,  the instrument
mapping is used to select a reference mapping,  and finally the reference
mapping is used to select a reference file.</p>
<p>CRDS mappings are written in a subset of Python and given the proper global
definitions can be parsed directly by the Python interpreter.   Nothing
precludes writing a parser for CRDS mappings in some other language.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/file_relationships.png"><img alt="diagram of file relationships, .pmap -&gt; .imap -&gt; .rmap -&gt; .reference" src="_images/file_relationships.png" style="width: 595.5px; height: 446.5px;" /></a>
</div>
<div class="section" id="naming">
<h2>Naming<a class="headerlink" href="#naming" title="Permalink to this headline">¶</a></h2>
<p>The CRDS HST mapping prototypes which are generated from information scraped from
the CDBS web site are named with the forms:</p>
<div class="highlight-python"><pre>&lt;observatory&gt; .pmap                               .e.g. hst.pmap
&lt;observatory&gt; _ &lt;instrument&gt; .imap                .e.g. hst_acs.imap
&lt;observatory&gt; _ &lt;instrument&gt; _ &lt;filekind&gt; .rmap   .e.g. hst_acs_darkfile.rmap</pre>
</div>
<p>The names of subsequent derived mappings include a version number:</p>
<div class="highlight-python"><pre>&lt;observatory&gt; _ &lt;version&gt; .pmap                               .e.g. hst_00001.pmap
&lt;observatory&gt; _ &lt;instrument&gt; _ &lt;version&gt; .imap                .e.g. hst_acs_00047.imap
&lt;observatory&gt; _ &lt;instrument&gt; _ &lt;version&gt; _ &lt;filekind&gt; .rmap  .e.g. hst_acs_darkfile_00012.rmap</pre>
</div>
</div>
<div class="section" id="basic-structure">
<h2>Basic Structure<a class="headerlink" href="#basic-structure" title="Permalink to this headline">¶</a></h2>
<p>All mappings have the same basic structure consisting of a &#8220;header&#8221; section
followed by a &#8220;selector&#8221; section.   The header provides meta data describing
the mapping,  while the selector provides matching rules used to look up
the results of the mapping.   A critical field in the mapping header is the
&#8220;parkey&#8221; field which names the dataset header parameters which are used by
the selector to do its lookup.</p>
</div>
<div class="section" id="pipeline-mappings-pmap">
<h2>Pipeline Mappings (.pmap)<a class="headerlink" href="#pipeline-mappings-pmap" title="Permalink to this headline">¶</a></h2>
<p>A sample pipeline mapping for HST looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">header</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;name&#39;</span> <span class="p">:</span> <span class="s">&#39;hst.pmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;derived_from&#39;</span> <span class="p">:</span> <span class="s">&#39;created by hand 12-23-2011&#39;</span><span class="p">,</span>
    <span class="s">&#39;mapping&#39;</span> <span class="p">:</span> <span class="s">&#39;PIPELINE&#39;</span><span class="p">,</span>
    <span class="s">&#39;observatory&#39;</span> <span class="p">:</span> <span class="s">&#39;HST&#39;</span><span class="p">,</span>
    <span class="s">&#39;parkey&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s">&#39;INSTRUME&#39;</span><span class="p">,),</span>
    <span class="s">&#39;description&#39;</span> <span class="p">:</span> <span class="s">&#39;Initially generated on 12-23-2011&#39;</span><span class="p">,</span>
    <span class="s">&#39;sha1sum&#39;</span> <span class="p">:</span> <span class="s">&#39;e2c6392fd2731df1e8d933bd990f3fd313a813db&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">selector</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;ACS&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_acs.imap&#39;</span><span class="p">,</span>
    <span class="s">&#39;COS&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos.imap&#39;</span><span class="p">,</span>
    <span class="s">&#39;NICMOS&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_nicmos.imap&#39;</span><span class="p">,</span>
    <span class="s">&#39;STIS&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_stis.imap&#39;</span><span class="p">,</span>
    <span class="s">&#39;WFC3&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_wfc3.imap&#39;</span><span class="p">,</span>
    <span class="s">&#39;WFPC2&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_wfpc2.imap&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A pipeline mapping matches the dataset &#8220;INSTRUME&#8221; header keyword against its
selector to look up an instrument mapping file.</p>
</div>
<div class="section" id="instrument-mappings-imap">
<h2>Instrument Mappings (.imap)<a class="headerlink" href="#instrument-mappings-imap" title="Permalink to this headline">¶</a></h2>
<p>A sample instrument mapping for HST&#8217;s COS instrument looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">header</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;derived_from&#39;</span> <span class="p">:</span> <span class="s">&#39;scraped 2011-12-23 11:57:10&#39;</span><span class="p">,</span>
    <span class="s">&#39;description&#39;</span> <span class="p">:</span> <span class="s">&#39;Initially generated on 2011-12-23 11:57:10&#39;</span><span class="p">,</span>
    <span class="s">&#39;instrument&#39;</span> <span class="p">:</span> <span class="s">&#39;COS&#39;</span><span class="p">,</span>
    <span class="s">&#39;mapping&#39;</span> <span class="p">:</span> <span class="s">&#39;INSTRUMENT&#39;</span><span class="p">,</span>
    <span class="s">&#39;name&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos.imap&#39;</span><span class="p">,</span>
    <span class="s">&#39;observatory&#39;</span> <span class="p">:</span> <span class="s">&#39;HST&#39;</span><span class="p">,</span>
    <span class="s">&#39;parkey&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="s">&#39;REFTYPE&#39;</span><span class="p">,),</span>
    <span class="s">&#39;sha1sum&#39;</span> <span class="p">:</span> <span class="s">&#39;800fb1567cb5bed4031402c7396aeb86c5e1db61&#39;</span><span class="p">,</span>
    <span class="s">&#39;source_url&#39;</span> <span class="p">:</span> <span class="s">&#39;http://www.stsci.edu/hst/observatory/cdbs/SIfileInfo/COS/reftablequeryindex&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">selector</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;badttab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_badttab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;bpixtab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_bpixtab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;brftab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_brftab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;brsttab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_brsttab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;deadtab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_deadtab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;disptab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_disptab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;flatfile&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_flatfile.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;fluxtab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_fluxtab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;geofile&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_geofile.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;lamptab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_lamptab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;phatab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_phatab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;spwcstab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_spwcstab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;tdstab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_tdstab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;wcptab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_wcptab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;xtractab&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_xtractab.rmap&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Instrument mappings match the desired reference file type against the
reference mapping which can be used to determine a best reference recommendation
for a particular dataset.  An instrument mapping lists all possible reference
types for all modes of the instrument,  some of which may not be appropriate
for a particular mode.   The selector key of an instrument mapping is the
value of a reference file header keyword &#8220;REFTYPE&#8221;,  and is the name of the
dataset header keyword which will record the best reference selection.</p>
</div>
<div class="section" id="reference-mappings-rmap">
<h2>Reference Mappings (.rmap)<a class="headerlink" href="#reference-mappings-rmap" title="Permalink to this headline">¶</a></h2>
<p>A sample reference mapping for HST COS DEADTAB looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">header</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;derived_from&#39;</span> <span class="p">:</span> <span class="s">&#39;scraped 2011-12-23 11:54:56&#39;</span><span class="p">,</span>
    <span class="s">&#39;description&#39;</span> <span class="p">:</span> <span class="s">&#39;Initially generated on 2011-12-23 11:54:56&#39;</span><span class="p">,</span>
    <span class="s">&#39;filekind&#39;</span> <span class="p">:</span> <span class="s">&#39;DEADTAB&#39;</span><span class="p">,</span>
    <span class="s">&#39;instrument&#39;</span> <span class="p">:</span> <span class="s">&#39;COS&#39;</span><span class="p">,</span>
    <span class="s">&#39;mapping&#39;</span> <span class="p">:</span> <span class="s">&#39;REFERENCE&#39;</span><span class="p">,</span>
    <span class="s">&#39;name&#39;</span> <span class="p">:</span> <span class="s">&#39;hst_cos_deadtab.rmap&#39;</span><span class="p">,</span>
    <span class="s">&#39;observatory&#39;</span> <span class="p">:</span> <span class="s">&#39;HST&#39;</span><span class="p">,</span>
    <span class="s">&#39;parkey&#39;</span> <span class="p">:</span> <span class="p">((</span><span class="s">&#39;DETECTOR&#39;</span><span class="p">,),</span> <span class="p">(</span><span class="s">&#39;DATE-OBS&#39;</span><span class="p">,</span> <span class="s">&#39;TIME-OBS&#39;</span><span class="p">)),</span>
    <span class="s">&#39;sha1sum&#39;</span> <span class="p">:</span> <span class="s">&#39;e27984a6441d8aaa7cd28ead2267a6be4c3a153b&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">Match</span><span class="p">({</span>
    <span class="p">(</span><span class="s">&#39;FUV&#39;</span><span class="p">,)</span> <span class="p">:</span> <span class="n">UseAfter</span><span class="p">({</span>
        <span class="s">&#39;1996-10-01 00:00:00&#39;</span> <span class="p">:</span> <span class="s">&#39;s7g1700gl_dead.fits&#39;</span><span class="p">,</span>
    <span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;NUV&#39;</span><span class="p">,)</span> <span class="p">:</span> <span class="n">UseAfter</span><span class="p">({</span>
        <span class="s">&#39;1996-10-01 00:00:00&#39;</span> <span class="p">:</span> <span class="s">&#39;s7g1700ql_dead.fits&#39;</span><span class="p">,</span>
    <span class="p">}),</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Reference mapping selectors are constructed as a nested hierarchy of selection
operators which match against various dataset header keywords.</p>
<p>For reference mappings,  the header &#8220;parkey&#8221; field is a tuple of tuples.  Each
stage of the nested selector consumes the next tuple of header keys.  For the
example above,   the Match operator matches against the value of the dataset
keyword &#8220;DETECTOR&#8221;.   Based on that match, the selected UseAfter operator
matches against the dataset&#8217;s &#8220;DATE-OBS&#8221; and &#8220;TIME-OBS&#8221; keywords to lookup
the name of a reference file.</p>
</div>
<div class="section" id="hst-selectors">
<h2>HST Selectors<a class="headerlink" href="#hst-selectors" title="Permalink to this headline">¶</a></h2>
<p>For HST,  all reference mapping selectors are defined as a two tiered hierarchy
with one general matching step (Match) and one date-time match step (UseAfter).
All the CRDS selector operators are written to select either a filename <em>or</em>
a nested operator.   In the case of HST,  the Match operator locates a nested
UseAfter operator which in turn locates the reference file.</p>
<div class="section" id="match">
<h3>Match<a class="headerlink" href="#match" title="Permalink to this headline">¶</a></h3>
<p>Conceptually,  the Match operator does a dictionary lookup based on the header
keyword values listed in the first tuple of rmap header field <em>parkey</em>.   In
actuality however,  CRDS does a winnowing search based on each successive
parkey value,  eliminating impossible matches and returning the best matching
survivor.   There are a number of special values associated with the CRDS Match
operator:  <a href="#id1"><span class="problematic" id="id2">*</span></a>,  Regular Expressions, N/A, and Substitutions.</p>
<div class="section" id="wild-cards-and-regular-expressions">
<h4>Wild Cards and Regular Expressions<a class="headerlink" href="#wild-cards-and-regular-expressions" title="Permalink to this headline">¶</a></h4>
<p>CRDS supports pseudo-regular expressions in its match patterns.   A
tuple value of &#8220;*&#8221; will match any value assigned to that parameter by the
dataset.   Similarly,  literal patterns separated by the &#8220;|&#8221; punctuator
, e.g.  &#8220;A|B|C|D&#8221;, will match any one of the patterns,  .e.g. &#8220;A&#8221; or &#8220;B&#8221; or
&#8220;C&#8221; or &#8220;D&#8221;.   These are dubbed &#8220;pseudo&#8221; regular expressions because &#8220;*&#8221; is
techinically equivalent to &#8220;^.*$&#8221;,  and &#8220;A|B&#8221; is technically equivalent to
&#8220;^A$|^B$&#8221;.   While losing some flexibility,  CRDS simplifies the notation for
the sake of brevity and clarity.</p>
</div>
<div class="section" id="n-a">
<h4>N/A<a class="headerlink" href="#n-a" title="Permalink to this headline">¶</a></h4>
<p>Some of the HST rmaps have match tuple values of &#8220;N/A&#8221;,  or Not Applicable.
This indicates that the parameter does not &#8220;count&#8221; for matching that case.
A value of N/A is matched as a special version of &#8220;*&#8221;.   N/A will match any
value in the dataset,  or no value,  but does not add to the overall sense of
goodness of the match.   Effectively, N/A parameters are ignored for that match
case only,  during matching only.</p>
<p>There are a couple uses for N/A parameters by HST.    First,  sometimes a
parameter is irrelevant in the context of the other parameters.   Second,
sometimes a parameter relevant,  but is not stored in the reference file or
CDBS,  and is not known until supplied by the dataset.   In this second case,
the unknown parameter can still be used to mutate the values of the other
parameters,  prior to doing the match. At least initially this technique is used
for ACS biasfile with match customization code.</p>
<p>An example of both regular expression and N/A matching occurs in this extract
from the ACS biasfile rmap:</p>
<div class="highlight-python"><pre>'parkey' : (('DETECTOR', 'CCDAMP', 'CCDGAIN', 'NUMCOLS', 'NUMROWS', 'LTV1', 'LTV2', 'XCORNER', 'YCORNER', 'CCDCHIP'), ('DATE-OBS', 'TIME-OBS')),

('HRC', 'ABCD|AD|BC', '1.0|2.0|4.0|8.0', '1062.0', '1044.0', '19.0', '0.0', 'N/A', 'N/A', 'N/A') : UseAfter({
    '1992-01-01 00:00:00' : 'kcb1734jj_bia.fits',
}),</pre>
</div>
<p>This case matches 3 distinct values for CCDAMP, namely ABCD, AD, and BC. It
matches 4 distinct values for CCDGAIN, namely 1.0, 2.0, 4.0, and 8.0.   The
parameters XCORNER, YCORNER, and CCDCHIP are unknown to CDBS and only supplied
by actual ACS datasets.   They are used to mutate the values of NUMROWS and
CCDAMP prior to matching,  and hence while they affect the outcome of the match,
they are not used literally during the match.</p>
</div>
<div class="section" id="substitution-parameters">
<h4>Substitution Parameters<a class="headerlink" href="#substitution-parameters" title="Permalink to this headline">¶</a></h4>
<p>Substituion parameters are short hand notation which eliminate the need to
duplicate rmap rules.  In order to support WFC3 biasfile conventions,  CRDS
rmaps permit the definition of meta-match-values which correspond to a set of
actual dataset header values. For instance,  when an rmap header contains a
&#8220;substitutions&#8221; field like this:</p>
<div class="highlight-python"><pre>'substitutions' : {
    'CCDAMP' : {
        'G280_AMPS' : ('ABCD', 'A', 'B', 'C', 'D', 'AC', 'AD', 'BC', 'BD'),
    },
},</pre>
</div>
<p>then a match tuple line like the following could be written:</p>
<div class="highlight-python"><pre>('UVIS', 'G280_AMPS', '1.5', '1.0', '1.0', 'G280-REF', 'T') : UseAfter({</pre>
</div>
<p>Here the value of G280_AMPS works like this:  first,   reference files listed
under that match tuple define CCDAMP=G280_AMPS.   Second, datasets which should
use those references define CCDAMP to a particular amplifier configuration,
.e.g.  ABCD.   Hence,  the reference file specifies a set of applicable
amplifier configurations,  while the dataset specifies a particular
configuration.   CRDS automatically expands substitutions into equivalent sets
of match rules.</p>
</div>
<div class="section" id="match-weighting">
<h4>Match Weighting<a class="headerlink" href="#match-weighting" title="Permalink to this headline">¶</a></h4>
<p>Because of the presence of special values like regular expressions, CRDS uses a
winnowing match algorithm which works on a parameter-by-parameter basis by
discarding match tuples which cannot possibly match. After examining all
parameters,   CRDS is left with a list of candidate matches.</p>
<p>For each literal, <a href="#id3"><span class="problematic" id="id4">*</span></a>, or regular expression parameter that matched,  CRDS
increases its sense of the goodness of the match by 1.   For each N/A that was
ignored, CRDS doesn&#8217;t change the weight of the match.   The highest ranked match
is the one CRDS chooses as best.   When more than one match tuple has the same
highest rank, we call this an &#8220;ambiguous&#8221; match.   Ambiguous matches will
either be merged,  or treated as errors/exceptions that cause the match to fail.
Talk about ambiguity.</p>
<p>For the initial HST rmaps, there are a number of match cases which overlap,
creating the potential for ambiguous matches by actual datasets.   For HST,  all
of the match cases refer to nested UseAfter selectors.  A working approach for
handling ambiguities here is to merge the two or more equal weighted UseAfter
lists into a single combined UseAfter which is then searched.</p>
<p>The ultimate goal of CRDS is to produce clear non-overlapping rules.  However,
since the initial rmaps are generated from historical mission data in CDBS,
there are eccentricities which need to be accomodated by merging or eventually
addressed by human beings who will simplify the rules by hand.</p>
</div>
</div>
<div class="section" id="useafter">
<h3>UseAfter<a class="headerlink" href="#useafter" title="Permalink to this headline">¶</a></h3>
<p>The UseAfter selector matches an ordered sequence of date time values to
corresponding reference filenames.   UseAfter finds the greatest date-time which
is less than or equal to ( &lt;= ) TEXPSTRT of the dataset.   Unlike
reference file and dataset timestamp values,  all CRDS rmaps represent times in
the single format shown in the rmap example below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">selector</span> <span class="o">=</span> <span class="n">Match</span><span class="p">({</span>
   <span class="p">(</span><span class="s">&#39;HRC&#39;</span><span class="p">,)</span> <span class="p">:</span> <span class="n">UseAfter</span><span class="p">({</span>
       <span class="s">&#39;1991-01-01 00:00:00&#39;</span> <span class="p">:</span> <span class="s">&#39;j4d1435hj_a2d.fits&#39;</span><span class="p">,</span>
       <span class="s">&#39;1992-01-01 00:00:00&#39;</span> <span class="p">:</span> <span class="s">&#39;kcb1734ij_a2d.fits&#39;</span><span class="p">,</span>
   <span class="p">}),</span>
   <span class="p">(</span><span class="s">&#39;WFC&#39;</span><span class="p">,)</span> <span class="p">:</span> <span class="n">UseAfter</span><span class="p">({</span>
       <span class="s">&#39;1991-01-01 00:00:00&#39;</span> <span class="p">:</span> <span class="s">&#39;kcb1734hj_a2d.fits&#39;</span><span class="p">,</span>
       <span class="s">&#39;2008-01-01 00:00:00&#39;</span> <span class="p">:</span> <span class="s">&#39;t3n1116mj_a2d.fits&#39;</span><span class="p">,</span>
   <span class="p">}),</span>
<span class="p">})</span>
</pre></div>
</div>
<p>In the above mapping,  when the detector is HRC,  if the dataset&#8217;s date/time
is before 1991-01-01,  there is no match.   If the date/time is between
1991-01-01 and 1992-01-01,  the reference file &#8216;j4d1435hj_a2d.fits&#8217; is matched.
If the dataset date/time is 1992-01-01 or after,  the recommended reference
file is &#8216;kcb1734ij_a2d.fits&#8217;.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
   <a href="index.html"><h2>Top</h2></a>
   <br/>
   
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">About Mappings</a><ul>
<li><a class="reference internal" href="#naming">Naming</a></li>
<li><a class="reference internal" href="#basic-structure">Basic Structure</a></li>
<li><a class="reference internal" href="#pipeline-mappings-pmap">Pipeline Mappings (.pmap)</a></li>
<li><a class="reference internal" href="#instrument-mappings-imap">Instrument Mappings (.imap)</a></li>
<li><a class="reference internal" href="#reference-mappings-rmap">Reference Mappings (.rmap)</a></li>
<li><a class="reference internal" href="#hst-selectors">HST Selectors</a><ul>
<li><a class="reference internal" href="#match">Match</a><ul>
<li><a class="reference internal" href="#wild-cards-and-regular-expressions">Wild Cards and Regular Expressions</a></li>
<li><a class="reference internal" href="#n-a">N/A</a></li>
<li><a class="reference internal" href="#substitution-parameters">Substitution Parameters</a></li>
<li><a class="reference internal" href="#match-weighting">Match Weighting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#useafter">UseAfter</a></li>
</ul>
</li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="web_site_use.html"
                        title="previous chapter">Using the CRDS Web Site</a></p>

   
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
   <br>
   <a href="/"><h2>Return to CRDS</h2></a>

        </div>
      </div>
      <div class="clearer"></div>
    </div>

<div class="footer" >
  <p align="left">
    If you have any questions regarding CRDS, please contact the
    STScI Help Desk <a HREF="mailto:help@stsci.edu">(help@stsci.edu)</a>.
  </p>
  
  <p align="left"> <a HREF="http://www.stsci.edu/institute/Copyright">Copyright Notice</a> </p>
  
  <p align="left"> <img BORDER="0" ALT="STScI" SRC="_static/HSTBanner.gif"/> </p>
</div>

  </body>
</html>