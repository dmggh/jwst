{% extends "base.html" %}

{% load stdtags %}

{% block contents %}

    <h2>Certifying File {{certified_file|grey}}</h2>
    
    {% if file_mode == "file_known" %}
        <h3>Blacklist Status:
        {% if blacklist_status == "OK" %}
            <span class="success">
        {% else %}
            <span class="error">
        {% endif %}
            {{blacklist_status}}
            </span>
        </h3>
    {% endif %}
    
    {% if blacklisted_by %}
        <p>Dependent on blacklisted files:</p> 
        {% for line in blacklisted_by %}
            <p>{{line|safe|grey}}</p>
        {% endfor %}
    {% endif %}
    
    {% if blacklist_exceptions %}
        <p class="error">Errors during blacklist check:</p>
        {% for line in blacklist_exceptions %}
            <p>{{line|safe}}</p>    
        {% endfor %}
    {% endif %}

    {% if is_reference %}
        <h3>Fitscheck Status: 
        {% if fitscheck_status == "OK" %}
            <span class="success">
        {% else %}
            <span class="error">
        {% endif %}
            {{fitscheck_status}}
            </span>
        </h3>
        {% for line in fitscheck_lines %}
            <p>{{line|safe}}</p>
        {% endfor %}
    {% endif %}
    
    <h3>Certify Status:
    {% if certify_status == "OK" %}
        <span class="success">
    {% else %}
        <span class="error">
    {% endif %}
        {{certify_status}}
        </span>
    </h3>
    <div class="program">
        {% for line in certify_lines %}
        <p>{{line|safe}}</p>
        {% endfor %}
    </div>

    {% if not is_reference %}
        <h3>Unknown Files:
        {% if missing_references %}
                <span class="error">FAILED</span>
            </h3>
            <p>The certified mapping {{certified_file|grey}} refers to files not known to CRDS:</p>
            {% for missing in missing_references %}
                <p class="error"> {{missing}} </p>
            {% endfor %}
        {% else %}
            <span class="success">None</span>
        </h3>
        {% endif %}
    {% endif %}
    <br/>
    <br/>

{% endblock contents %}
