{% extends "base.html" %}

{% load stdtags %}

{% block contents %}

    <h2>Edit Rmap</h2>
    
    {% include "select_pmap_results.html" %}

    <h3>Deriving From:</h3>
    {% for mapping in old_mappings %}
        {% if mapping != pmap %}
            <p>{{mapping|browse}}</p>
        {% endif %}
    {% endfor %}
    <br/>

    <h3>Submitted References:</h3>
    <table border="1">
        <tr style='font-weight: bold;'>
            <td>Upload Name</td>
            <td>CRDS Name</td>
        </tr>
        {% for ref in new_references %}
            <tr>
                <td style="padding: 0.5em;">{{ref.0}}</td>
                <td style="padding: 0.5em;">{{ref.1|browse}}</td>
            </tr>
        {% endfor %}
    </table>    
    <br/>

    <h3>Created New Mappings:</h3>
    {% for mapping in generated_files %}
        <p>{{mapping|browse}}</p>
    {% endfor %}
    <br/>

    <h3>By editing {{browsed_file|browse}}:</h3>
    <table border='1'>
        <tr style='font-weight: bold;' >
            <td>Action</td>
            <td>Match</td>
            <td>Useafter Date</td>
            <td>Reference File</td>
        </tr>
        {% for action in actions %}
            <tr>
                <td style="padding: 0.5em;">{{action.0}}</td>
                <td style="padding: 0.5em;">{{action.1}}</td>
                <td style="padding: 0.5em;">{{action.2}}</td>
                <td style="padding: 0.5em;">{{action.3}}</td>
            </tr>
        {% endfor %}
    </table>
    <br/>
    
    {% include "collision_explain.html" %}
    
    {% include "confirm.html" %}
    
    <br/>
    <br/>
{% endblock contents %}

