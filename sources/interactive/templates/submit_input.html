{% extends "base.html" %}

{% block head_additions %}
    {% include "fileupload/picture_form_head_additions2.html" %}
{% endblock %}

{% block head_overrides %}
    {% include "jpoll/jpoll_head_overrides.html" %}
{% endblock %}

{% block contents_both %}

    <h2>Submit {{crds_filetype|capfirst}} Files</h2>

        {% include "select_files.html" %}        

        <form method="post" action="/submit/{{crds_filetype}}/" enctype="multipart/form-data"
            id="batch_submit_form" class="jpoll_ajax_html_form"
            onsubmit="return crds.validate_and_confirm_file_submit(this);" > {% csrf_token %}

            <input type='hidden' name='observatory' value='{{observatory}}' />
            
            <div title="Degree that new files are expected to impact science results.">
              <br/>
              <h3 style="display: inline;" >Change Level:</h3>
              <select style="font-size: 0.75em;" name='change_level' value="{{change_level}}">
                <option>SEVERE</option>
                <option>MODERATE</option>
                <option>TRIVIAL</option>
              </select>
            </div>

            <div title="Author of new reference files, generally not the submitter.">
              <br/>
              <h3 style="display: inline;">Creator:</h3>
              <input type='text' name='creator' id='creator' size="40" value="{{creator}}">
            </div>

            <div title="Information about file changes and expected impacts, include instrument and type.">
              <br/>
              <h3 style="display: inline;" >Description:</h3>
              <textarea name='description' id='description' rows="4" cols="50">{{description}}</textarea>
            </div>

            {% if crds_filetype == "reference" %}
                <div title="Compare new references with older versions during certification." > 
                  <br/>
                  <h3 style="display:inline;">Compare Old Reference: </h3> 
                  <input type="checkbox" name="compare_old_reference"
                         value='checked' {{compare_old_reference}} />
                </div>
                <div id="comparison-context-hide" title="Context to search for comparison references.">
                  <h3>Comparison Context:</h3>
                  {% include "select_pmap.html" %}
                </div>        
                <script type="text/javascript" language="javascript">
                    $("input[name='compare_old_reference']").change(function() {
                        var checkbox = $("input[name='compare_old_reference']");
                        if (checkbox.is(":checked")) {
                                $("#comparison-context-hide").show();
                        } else {
                                $("#comparison-context-hide").hide();
                        };
                    });
                </script>
            {% endif %}
            
            {% if crds_filetype == "mapping" %}
                <div title="Automatically generate new .pmap and .imap referring to new rmaps.">
                  <br/>
                  <h3 style="display: inline;">Generate Contexts:</h3>
                  <input name='generate_contexts' type='checkbox' value='checked' {{generate_contexts}}> 
                </div>
                <div id="derivation-context-hide" title="Version CRDS of rules to which new files are added.">
                  <h3>Derive From Context:</h3>
                  {% include "select_pmap.html" %}  
                </div>      
                <script type="text/javascript" language="javascript">
                    $("input[name='generate_contexts']").change(function() {
                        var checkbox = $("input[name='generate_contexts']");
                        if (checkbox.is(":checked")) {
                                $("#derivation-context-hide").show();
                        } else {
                                $("#derivation-context-hide").hide();
                        };
                    });
                </script>
            {% endif %}
            
            <div title="When checked, automatically rename the submitted files with CRDS generated names.">
              <br/>
              <h3 style="display: inline;">Auto-Rename:</h3>
              {% include "auto_rename_input.html" %}
            </div>
            
            <br/> 

          <input class="btn btn-primary" type="submit" value="Submit Files">
        </form>
{% endblock contents_both %}
        
{% block help %}
{% endblock help %}


