#! /usr/bin/env pysh
#-*-python-*-

usage("""<filenames...>""", 1)

from crds import log
from crds_server.interactive import models

log.info("Fetching fileblob map.")
blobmap = models.get_fileblob_map()

for f in sorted(set(sys.argv[1:])):
    with log.error_on_exception("Failed to find", repr(f), "in database."):
        blob = blobmap[f]
        with log.error_on_exception("Failed detroying", repr(f)):
            blob.destroy()
