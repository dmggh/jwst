#! /usr/bin/env pysh
#-*-python-*-
from __future__ import print_function
from __future__ import unicode_literals
from __future__ import division
from __future__ import absolute_import
from future import standard_library
standard_library.install_aliases()
from builtins import *

from astropy.io import fits
from crds.core import pysh

pysh.usage("<filename> <keyword> [<value> [<extension>]]", 2, 4)

if len(sys.argv) == 3:
   filename, keyword = sys.argv[1:]
   value, extension = None, None
elif len(sys.argv) == 4:
   filename, keyword, value = sys.argv[1:]
   extension = None
else:
   filename, keyword, value, extension = sys.argv[1:]
   extension = int(extension)

if value is None:
   try:
      print(keyword, "=", fits.getval(filename, keyword=keyword))
   except:
      print("keyword", repr(keyword), "not found in", repr(filename))
else:
   fits.setval(filename, keyword=keyword, value=value, ext=extension)

