# use /bin/tcsh to run commands, no matter what /etc/passwd says
SHELL=/bin/tcsh

MAILTO="crds-servers@stsci.edu"

# run five minutes after 3 am, every day
5 3 * * *       source $HOME/cronenv.csh;      nightly.crds.job 

# every minute, no e-mail,  CRDS server index page ping
# */1 * * * *     source $HOME/cronenv.csh;  wget $CRDS_SERVER_URL -O /dev/null  >& /dev/null;

# every minute, no e-mail,  atop metrics collection
# */10 * * * *     source $HOME/cronenv.csh;  run_atop >& /dev/null;

# every six hours, iozone metrics collection
# 0 */6 * * *     source $HOME/cronenv.csh;  run_iozone >& /dev/null;

# every 2 hours, no e-mail
# 0 */2 * * *  source $HOME/cronenv.csh;        background_chown $CRDS_PATH 640 |& cat  >>  ${CRDS_CRON}/background_chown.log;  

# every 10 minutes, e-mail
*/10 * * * *     source $HOME/cronenv.csh;     cron_query_affected_datasets -q -i

# every 5 minutes, no e-mail
*/5 * * * *     source $HOME/cronenv.csh;      monitor_reprocessing >& ${CRDS_CRON}/monitor_reprocessing.log

# every 5 minutes, no e-mail
*/5 * * * *     source $HOME/cronenv.csh;      cron_sync --last 1  --save-pickles >& ${CRDS_CRON}/server_cache_sync.log

# every 5 minutes, no e-mail
*/5 * * * *     source $HOME/cronenv.csh;      update_delivery_status >& ${CRDS_CRON}/update_delivery_status.log

# every 10 minutes, no e-mail, only on the OPS server
*/10 * * * *  source $HOME/cronenv.csh;   ops_only sync_ops_to_grp >& ${CRDS_CRON}/sync_ops_to_grp.log

# every 12 hours, no e-mail, 
0 */12 * * * source $HOME/cronenv.csh;   ops_only set_grp_cache_permissions  >& ${CRDS_CRON}/set_grp_cache_permissions.log

# every 4 hours, no e-mail, all servers
0 */4 * * *    source $HOME/cronenv.csh;      (clear_web_cache; prime_web_cache) >& ${CRDS_CRON}/clear_web_cache.log

# run at 2:15pm on the first of every month
#   15 14 1 * *     $HOME/bin/monthly
# run at 10 pm on weekdays, annoy Joe
#   0 22 * * 1-5   mail -s "It's 10pm" joe%Joe,%%Where are your kids?%
#   23 0-23/2 * * * echo "run 23 minutes after midn, 2am, 4am ..., everyday"
#   5 4 * * sun     echo "run at 5 after 4 every sunday"

# Every week, only on the DEV server

# runs ~ small hours,  every week,  e-mail
# certify local cache only
0 12 * * sun     source $HOME/cronenv.csh;  crds_certify_cache 1 --exist   >& ${CRDS_CRON}/crds_certify_cache.log; snip ${CRDS_CRON}/crds_certify_cache.log 500

# runs ~1 hours,  every week, e-mail

0 0 * * sat      source $HOME/cronenv.csh;  crds_verify_cache  shared   >& ${CRDS_CRON}/crds_verify_cache.shared.log;  snip ${CRDS_CRON}/crds_verify_cache.shared.log 500

0 0 * * sun      source $HOME/cronenv.csh;  crds_verify_cache  local    >& ${CRDS_CRON}/crds_verify_cache.local.log;   snip ${CRDS_CRON}/crds_verify_cache.local.log 500

# runs weekly on midnight Sunday/Monday,  no log e-mail

0 0 * * mon      source $HOME/cronenv.csh;  cd crds_report;   ./crds_report_cron >& ${CRDS_CRON}/crds_report_cron.log;

